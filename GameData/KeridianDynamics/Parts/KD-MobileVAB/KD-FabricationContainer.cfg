// KD-FabricationContainer.cfg v1.1.0.0 
// Keridian Dynamics (KDVA)
// created: 22 Feb 2019
// updated: 19 Oct 2022

// this file: CC BY-SA 4.0 by zer0Kerbal

PART
{

	name = KD-FabricationContainer
	module = Part
	author = Eleusis La Arwall and zer0kerbal

	MODEL
	{
		model = KeridianDynamics/Assets/KD-MobileVAB/KD-FabricationContainer
	}
	scale = 1
	rescaleFactor = 1
	bulkheadProfiles = size1

	CrewCapacity = 1

	node_stack_top = 0.0, 0.6, 0.0, 0.0, 1.0, 0.0, 1
	node_stack_bottom = 0.0, -0.6, 0.0, 0.0, -1.0, 0.0, 1
	node_attach = 0.0, 0.0, 0.62, 0.0, 0.0, -1.0

	TechRequired = advMetalworks
	entryCost = 18000
	cost = 8000
	category = Utility
	subcategory = 0

	manufacturer = #KDVA-manu
	title = #KDVA-KDFabricationContainer-titl // KD-FabricationContainer
	description = #KDVA-KDFabricationContainer-desc
	tags = #KDVA-KDFabricationContainer-tags

	attachRules = 1,1,1,1,0

	mass = 0.96
	fuelCrossFeed = True

	dragModelType = default
	maximum_drag = 0.2
	minimum_drag = 0.2
	angularDrag = 2

	crashTolerance = 20

	maxTemp = 1800

	INTERNAL
	{
		name = KD-FC-IVA
	}

	MODULE
	{
		name = ModuleColorChanger			// Module Name
		shaderProperty = _EmissiveColor			// Shader property
		animRate = 0.8					// Speed of the animation in 1/second (for 10 seconds enter 0.1)
		animState = false				// Start active?
		useRate = true					// Smooth transition animation? (Instant change if false)
		toggleInEditor = true				// Can lights be toggled in VAB/SPH?
		toggleInFlight = true				// Can lights be toggled after launch?
		toggleUnfocused = true				// Can lights be toggled from inactive vessel? (EVA for example)
		unfocusedRange = 5				// How close inactive vessel must be to toggle lights (in meters)
		toggleName = #autoLOC_502011 // Toggle Lights
		eventOnName = #autoLOC_502012 // Lights On
		eventOffName = #autoLOC_502013 // Lights Off
		toggleAction = true				// Available for Action Groups? (as toggle)
		defaultActionGroup = Light			// Name of default action group (Stage,Gear,Light,RCS,SAS,Brakes,Abort,CustomXX with X=0-9)
//			key	frame	intens.	IN	OUT
		redCurve					// Floatpoint curve for RED
		{
			key = 	0	0	0	3
			key = 	1	1	0	0	// Animation will always stop at frame = 1
		}
		greenCurve					// Floatpoint curve for GREEN
		{
			key = 	0	0	0	1
			key = 	1	0.9	1	0
		}
		blueCurve					// Floatpoint curve for BLUE
		{
			key = 	0	0	0	0
			key = 	1	0.7	1.5	0
		}
		alphaCurve					// Floatpoint curve for ALPHA (visibility)
		{
			key = 	0	1
		}
	}
	MODULE
	{
		name = ModuleOverheatDisplay
	}
	MODULE
	{
		name = ModuleResourceConverter
		ConverterName = #KDVA-KDFabricationContainer-MRC-Metal2RocketParts-name		// #KDVA-KDFabricationContainer-MRC-Metal2RocketParts-name = Metal-->RocketParts
		StartActionName = #KDVA-KDFabricationContainer-MRC-Metal2RocketParts-strt	// #KDVA-KDFabricationContainer-MRC-Metal2RocketParts-strt = Start Metal --> RocketParts
		StopActionName = #KDVA-KDFabricationContainer-MRC-Metal2RocketParts-stop	// #KDVA-KDFabricationContainer-MRC-Metal2RocketParts-stop = Stop Metal --> RocketParts
		AutoShutdown = true
		TemperatureModifier
		{
			key = 0		2000	0	0
			key = 200	2000	0	0
			key = 500	10	0	0
			key = 1000	0	0	0
		}
		GeneratesHeat = true
		DefaultShutoffTemp = .9
		ThermalEfficiency 
		{
			key = 0		1	0	0
			key = 305	1	0	0
			key = 500	0	0	0
		}
		UseSpecialistBonus = true
		SpecialistEfficiencyFactor = 0.166666
		SpecialistBonusBase = 0
//		Specialty = Engineer
		ExperienceEffect = ConverterSkill
		EfficiencyBonus = 1
		INPUT_RESOURCE
		{
			ResourceName = Metal			//	Density=0.039
			Ratio = 0.0044871795
			FlowMode = STAGE_PRIORITY_FLOW
  		}
		INPUT_RESOURCE
		{
			ResourceName = ElectricCharge
			Ratio = 15
		}
		OUTPUT_RESOURCE
		{
			ResourceName = RocketParts		//	Density=0.0025
			Ratio = 0.07				//	Yield=~100%
			DumpExcess = false
			FlowMode = STAGE_PRIORITY_FLOW
		}
	}
//	Module,3 needs to be located here for a better order in the right-click menu.
//	Module,4 needs to be located here for a better order in the right-click menu.
//	MODULE
//	{
//		name = ModuleAnimationGroup
//		deployAnimationName = 
//		activeAnimationName = 
//		moduleType = Fabricator
//		autoDeploy = false
//	}
	MODULE
	{
		name = ModuleCoreHeat
		CoreTempGoal = 300
		CoreToPartRatio = 0.1
		CoreTempGoalAdjustment = 0
		CoreEnergyMultiplier = 0.05
		HeatRadiantMultiplier = 0.025
		CoolingRadiantMultiplier = 0
		HeatTransferMultiplier = 0
		CoolantTransferMultiplier = 0.01
		radiatorCoolingFactor = 1
		radiatorHeatingFactor = 0.01
		MaxCalculationWarp = 100
		CoreShutdownTemp = 500
		MaxCoolant = 1000
	}

	// Optional MM-Modules

//	MODULE,3	{name = ModuleResourceConverter}	KeridianDynamics-Converters.cfg
//	MODULE,4	{name = ModuleResourceConverter}	KeridianDynamics-Converters.cfg
//	MODULE,6	{name = ExWorkshop}			KeridianDynamics-EL.cfg
//	MODULE,7	{name = OseModuleWorkshop}		KeridianDynamics-OSE.cfg
//	MODULE,8	{name = OseModuleRecycler}		KeridianDynamics-OSE.cfg
//	MODULE,9	{name = ModuleConnectedLivingSpace}	KeridianDynamics-CLS.cfg

	RESOURCE
	{
		name = RocketParts
		amount = 0
		maxAmount = 20
	}
}